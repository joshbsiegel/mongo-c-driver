if(USE_BUNDLED_UTF8PROC STREQUAL "TRUE")
  message (STATUS "Enabling utf8proc (bundled)")
  add_library (utf8proc_obj OBJECT "${UTF8PROC_SOURCES}")
  set_property (TARGET utf8proc_obj PROPERTY POSITION_INDEPENDENT_CODE TRUE)
  target_compile_definitions (utf8proc_obj PUBLIC UTF8PROC_STATIC)
elseif (USE_BUNDLED_UTF8PROC STREQUAL "FALSE")
 message (STATUS "Enabling utf8proc")
  find_package(PkgConfig)
  pkg_check_modules(PC_UTF8PROC REQUIRED libutf8proc)
  add_library(utf8proc STATIC IMPORTED)
  set_property(TARGET utf8proc PROPERTY IMPORTED_LOCATION "${PC_UTF8PROC_LINK_LIBRARIES}")
  set_property(TARGET utf8proc PROPERTY INTERFACE_INCLUDE_DIRECTORIES "${PC_UTF8PROC_STATIC_INCLUDE_DIRS}")
  set_property(TARGET utf8proc PROPERTY INTERFACE_COMPILE_OPTIONS "${PC_UTF8PROC_STATIC_CFLAGS}")
  set_property(TARGET utf8proc PROPERTY INTERFACE_LINK_OPTIONS "${PC_UTF8PROC_STATIC_LDFLAGS}")
else ()
   message (FATAL_ERROR
            "USE_BUNDLED_UTF8PROC must be set to either TRUE or FALSE"
            )
endif()
