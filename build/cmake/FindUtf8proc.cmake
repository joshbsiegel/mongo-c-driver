if(USE_BUNDLED_UTF8PROC STREQUAL "TRUE")
   message (STATUS "Enabling utf8proc (bundled)")
   add_library (utf8proc_obj OBJECT "${UTF8PROC_SOURCES}")
   set_property (TARGET utf8proc_obj PROPERTY POSITION_INDEPENDENT_CODE TRUE)
   set (SOURCES ${SOURCES} $<TARGET_OBJECTS:utf8proc_obj>)
   target_compile_definitions (utf8proc_obj PUBLIC UTF8PROC_STATIC)
else()
  find_package(PkgConfig)
  pkg_check_modules(PC_UTF8PROC REQUIRED libutf8proc)
  add_library(utf8proc STATIC IMPORTED)
  set_property(TARGET utf8proc APPEND PROPERTY COMPILE_OPTIONS ${PC_UTF8PROC_STATIC_CFLAGS})
  set_property(TARGET utf8proc APPEND PROPERTY LINK_OPTIONS ${PC_UTF8PROC_STATIC_LDFLAGS})
  set_property(TARGET utf8proc APPEND PROPERTY IMPORTED_LOCATION "${PC_UTF8PROC_LINK_LIBRARIES}")
endif()